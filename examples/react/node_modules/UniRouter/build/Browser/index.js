!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.browser={})}(this,function(e){"use strict";function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}var o=function(){};"production"!==process.env.NODE_ENV&&(o=function(e,t,n){var o=arguments.length;n=new Array(2<o?o-2:0);for(var r=2;r<o;r++)n[r-2]=arguments[r];if(t===undefined)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(t.length<10||/^[s\W]*$/.test(t))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+t);if(!e){var i=0,a="Warning: "+t.replace(/%s/g,function(){return n[i++]});"undefined"!=typeof console&&console.error(a);try{throw new Error(a)}catch(e){}}});var r=o,l=process.env.NODE_ENV,i=function(e,t,n,o,r,i,a,u){if("production"!==l&&t===undefined)throw new Error("invariant requires an error message argument");if(!e){var s;if(t===undefined)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,r,i,a,u],f=0;(s=new Error(t.replace(/%s/g,function(){return c[f++]}))).name="Invariant Violation"}throw s.framesToPop=1,s}};function h(e){return"/"===e.charAt(0)}function p(e,t){for(var n=t,o=n+1,r=e.length;o<r;n+=1,o+=1)e[n]=e[o];e.pop()}function a(e){var t=1<arguments.length&&arguments[1]!==undefined?arguments[1]:"",n=e&&e.split("/")||[],o=t&&t.split("/")||[],r=e&&h(e),i=t&&h(t),a=r||i;if(e&&h(e)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";var u=void 0;if(o.length){var s=o[o.length-1];u="."===s||".."===s||""===s}else u=!1;for(var c=0,f=o.length;0<=f;f--){var l=o[f];"."===l?p(o,f):".."===l?(p(o,f),c++):c&&(p(o,f),c--)}if(!a)for(;c--;c)o.unshift("..");!a||""===o[0]||o[0]&&h(o[0])||o.unshift("");var d=o.join("/");return u&&"/"!==d.substr(-1)&&(d+="/"),d}var u=Object.freeze({default:a}),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function c(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(e,t){return c(e,n[t])});var e=void 0===t?"undefined":s(t);if(e!==(void 0===n?"undefined":s(n)))return!1;if("object"===e){var o=t.valueOf(),r=n.valueOf();if(o!==t||r!==n)return c(o,r);var i=Object.keys(t),a=Object.keys(n);return i.length===a.length&&i.every(function(e){return c(t[e],n[e])})}return!1}var f=Object.freeze({default:c}),R=n(function(e,t){t.__esModule=!0;t.addLeadingSlash=function e(t){return"/"===t.charAt(0)?t:"/"+t},t.stripLeadingSlash=function e(t){return"/"===t.charAt(0)?t.substr(1):t};var o=t.hasBasename=function e(t,n){return new RegExp("^"+n+"(\\/|\\?|#|$)","i").test(t)};t.stripBasename=function e(t,n){return o(t,n)?t.substr(n.length):t},t.stripTrailingSlash=function e(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t},t.parsePath=function e(t){var n=t||"/",o="",r="",i=n.indexOf("#");-1!==i&&(r=n.substr(i),n=n.substr(0,i));var a=n.indexOf("?");return-1!==a&&(o=n.substr(a),n=n.substr(0,a)),{pathname:n,search:"?"===o?"":o,hash:"#"===r?"":r}},t.createPath=function e(t){var n=t.pathname,o=t.search,r=t.hash,i=n||"/";return o&&"?"!==o&&(i+="?"===o.charAt(0)?o:"?"+o),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}});t(R);R.addLeadingSlash,R.stripLeadingSlash,R.hasBasename,R.stripBasename,R.stripTrailingSlash,R.parsePath,R.createPath;var d=u&&a||u,v=f&&c||f,Y=n(function(e,t){t.__esModule=!0,t.locationsAreEqual=t.createLocation=undefined;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=n(d),o=n(v);function n(e){return e&&e.__esModule?e:{default:e}}t.createLocation=function e(t,n,o,r){var i=void 0;"string"==typeof t?(i=(0,R.parsePath)(t)).state=n:((i=a({},t)).pathname===undefined&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",n!==undefined&&i.state===undefined&&(i.state=n));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return o&&(i.key=o),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=(0,u.default)(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i},t.locationsAreEqual=function e(t,n){return t.pathname===n.pathname&&t.search===n.search&&t.hash===n.hash&&t.key===n.key&&(0,o.default)(t.state,n.state)}});t(Y);Y.locationsAreEqual,Y.createLocation;var y=n(function(e,t){t.__esModule=!0;var u=function n(e){return e&&e.__esModule?e:{default:e}}(r);(function e(){var a=null,r=(function e(t){return(0,u.default)(null==a,"A history supports only one prompt at a time"),a=t,function(){a===t&&(a=null)}},function e(t,n,o,r){if(null!=a){var i="function"==typeof a?a(t,n):a;"string"==typeof i?"function"==typeof o?o(i,r):((0,u.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),r(!0)):r(!1!==i)}else r(!0)},[]);(function e(t){var n=!0,o=function e(){n&&t.apply(undefined,arguments)};return r.push(o),function(){n=!1,r=r.filter(function(e){return e!==o})}}),function e(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];r.forEach(function(e){return e.apply(undefined,n)})};return{setPrompt:function e(t){return(0,u.default)(null==a,"A history supports only one prompt at a time"),a=t,function(){a===t&&(a=null)}},confirmTransitionTo:function e(t,n,o,r){if(null!=a){var i="function"==typeof a?a(t,n):a;"string"==typeof i?"function"==typeof o?o(i,r):((0,u.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),r(!0)):r(!1!==i)}else r(!0)},appendListener:function e(t){var n=!0,o=function e(){n&&t.apply(undefined,arguments)};return r.push(o),function(){n=!1,r=r.filter(function(e){return e!==o})}},notifyListeners:function e(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];r.forEach(function(e){return e.apply(undefined,n)})}}});t.default=function e(){var a=null,r=(function e(t){return(0,u.default)(null==a,"A history supports only one prompt at a time"),a=t,function(){a===t&&(a=null)}},function e(t,n,o,r){if(null!=a){var i="function"==typeof a?a(t,n):a;"string"==typeof i?"function"==typeof o?o(i,r):((0,u.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),r(!0)):r(!1!==i)}else r(!0)},[]);(function e(t){var n=!0,o=function e(){n&&t.apply(undefined,arguments)};return r.push(o),function(){n=!1,r=r.filter(function(e){return e!==o})}}),function e(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];r.forEach(function(e){return e.apply(undefined,n)})};return{setPrompt:function e(t){return(0,u.default)(null==a,"A history supports only one prompt at a time"),a=t,function(){a===t&&(a=null)}},confirmTransitionTo:function e(t,n,o,r){if(null!=a){var i="function"==typeof a?a(t,n):a;"string"==typeof i?"function"==typeof o?o(i,r):((0,u.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),r(!0)):r(!1!==i)}else r(!0)},appendListener:function e(t){var n=!0,o=function e(){n&&t.apply(undefined,arguments)};return r.push(o),function(){n=!1,r=r.filter(function(e){return e!==o})}},notifyListeners:function e(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];r.forEach(function(e){return e.apply(undefined,n)})}}}});t(y);var q=n(function(e,t){t.__esModule=!0;t.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),t.addEventListener=function e(t,n,o){return t.addEventListener?t.addEventListener(n,o,!1):t.attachEvent("on"+n,o)},t.removeEventListener=function e(t,n,o){return t.removeEventListener?t.removeEventListener(n,o,!1):t.detachEvent("on"+n,o)},t.getConfirmation=function e(t,n){return n(window.confirm(t))},t.supportsHistory=function e(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},t.supportsPopStateOnHashChange=function e(){return-1===window.navigator.userAgent.indexOf("Trident")},t.supportsGoWithoutReloadUsingHash=function e(){return-1===window.navigator.userAgent.indexOf("Firefox")},t.isExtraneousPopstateEvent=function e(t){return t.state===undefined&&-1===navigator.userAgent.indexOf("CriOS")}});t(q);q.canUseDOM,q.addEventListener,q.removeEventListener,q.getConfirmation,q.supportsHistory,q.supportsPopStateOnHashChange,q.supportsGoWithoutReloadUsingHash,q.isExtraneousPopstateEvent;var m,g,w=t(n(function(e,t){t.__esModule=!0;var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},j=n(r),H=n(i),M=n(y);function n(e){return e&&e.__esModule?e:{default:e}}var C="popstate",U="hashchange",B=function e(){try{return window.history.state||{}}catch(e){return{}}};(function e(){var t=0<arguments.length&&arguments[0]!==undefined?arguments[0]:{};(0,H.default)(q.canUseDOM,"Browser history needs a DOM");var u=window.history,s=(0,q.supportsHistory)(),n=!(0,q.supportsPopStateOnHashChange)(),o=t.forceRefresh,c=o!==undefined&&o,r=t.getUserConfirmation,f=r===undefined?q.getConfirmation:r,i=t.keyLength,a=i===undefined?6:i,l=t.basename?(0,R.stripTrailingSlash)((0,R.addLeadingSlash)(t.basename)):"",d=function e(t){var n=t||{},o=n.key,r=n.state,i=window.location,a=i.pathname+i.search+i.hash;return(0,j.default)(!l||(0,R.hasBasename)(a,l),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+a+'" to begin with "'+l+'".'),l&&(a=(0,R.stripBasename)(a,l)),(0,Y.createLocation)(a,r,o)},h=function e(){return Math.random().toString(36).substr(2,a)},p=(0,M.default)(),v=function e(t){A(S,t),S.length=u.length,p.notifyListeners(S.location,S.action)},y=function e(t){(0,q.isExtraneousPopstateEvent)(t)||w(d(t.state))},m=function e(){w(d(B()))},g=!1,w=function e(t){if(g)g=!1,v();else{p.confirmTransitionTo(t,"POP",f,function(e){e?v({action:"POP",location:t}):b(t)})}},b=function e(t){var n=S.location,o=O.indexOf(n.key);-1===o&&(o=0);var r=O.indexOf(t.key);-1===r&&(r=0);var i=o-r;i&&(g=!0,P(i))},k=d(B()),O=[k.key],E=function e(t){return l+(0,R.createPath)(t)},P=(function e(t,n){(0,j.default)(!("object"===(void 0===t?"undefined":T(t))&&t.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var a=(0,Y.createLocation)(t,n,h(),S.location);p.confirmTransitionTo(a,"PUSH",f,function(e){if(e){var t=E(a),n=a.key,o=a.state;if(s)if(u.pushState({key:n,state:o},null,t),c)window.location.href=t;else{var r=O.indexOf(S.location.key),i=O.slice(0,-1===r?0:r+1);i.push(a.key),O=i,v({action:"PUSH",location:a})}else(0,j.default)(o===undefined,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=t}})},function e(t,n){(0,j.default)(!("object"===(void 0===t?"undefined":T(t))&&t.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i="REPLACE",a=(0,Y.createLocation)(t,n,h(),S.location);p.confirmTransitionTo(a,i,f,function(e){if(e){var t=E(a),n=a.key,o=a.state;if(s)if(u.replaceState({key:n,state:o},null,t),c)window.location.replace(t);else{var r=O.indexOf(S.location.key);-1!==r&&(O[r]=a.key),v({action:i,location:a})}else(0,j.default)(o===undefined,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(t)}})},function e(t){u.go(t)}),L=(function e(){return P(-1)},function e(){return P(1)},0),x=function e(t){1===(L+=t)?((0,q.addEventListener)(window,C,y),n&&(0,q.addEventListener)(window,U,m)):0===L&&((0,q.removeEventListener)(window,C,y),n&&(0,q.removeEventListener)(window,U,m))},_=!1,S=(function e(){var t=0<arguments.length&&arguments[0]!==undefined&&arguments[0],n=p.setPrompt(t);return _||(x(1),_=!0),function(){return _&&(_=!1,x(-1)),n()}},function e(t){var n=p.appendListener(t);return x(1),function(){x(-1),n()}},{length:u.length,action:"POP",location:k,createHref:E,push:function e(t,n){(0,j.default)(!("object"===(void 0===t?"undefined":T(t))&&t.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var a=(0,Y.createLocation)(t,n,h(),S.location);p.confirmTransitionTo(a,"PUSH",f,function(e){if(e){var t=E(a),n=a.key,o=a.state;if(s)if(u.pushState({key:n,state:o},null,t),c)window.location.href=t;else{var r=O.indexOf(S.location.key),i=O.slice(0,-1===r?0:r+1);i.push(a.key),O=i,v({action:"PUSH",location:a})}else(0,j.default)(o===undefined,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=t}})},replace:function e(t,n){(0,j.default)(!("object"===(void 0===t?"undefined":T(t))&&t.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i="REPLACE",a=(0,Y.createLocation)(t,n,h(),S.location);p.confirmTransitionTo(a,i,f,function(e){if(e){var t=E(a),n=a.key,o=a.state;if(s)if(u.replaceState({key:n,state:o},null,t),c)window.location.replace(t);else{var r=O.indexOf(S.location.key);-1!==r&&(O[r]=a.key),v({action:i,location:a})}else(0,j.default)(o===undefined,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(t)}})},go:P,goBack:function e(){return P(-1)},goForward:function e(){return P(1)},block:function e(){var t=0<arguments.length&&arguments[0]!==undefined&&arguments[0],n=p.setPrompt(t);return _||(x(1),_=!0),function(){return _&&(_=!1,x(-1)),n()}},listen:function e(t){var n=p.appendListener(t);return x(1),function(){x(-1),n()}}});return S});t.default=function e(){var t=0<arguments.length&&arguments[0]!==undefined?arguments[0]:{};(0,H.default)(q.canUseDOM,"Browser history needs a DOM");var u=window.history,s=(0,q.supportsHistory)(),n=!(0,q.supportsPopStateOnHashChange)(),o=t.forceRefresh,c=o!==undefined&&o,r=t.getUserConfirmation,f=r===undefined?q.getConfirmation:r,i=t.keyLength,a=i===undefined?6:i,l=t.basename?(0,R.stripTrailingSlash)((0,R.addLeadingSlash)(t.basename)):"",d=function e(t){var n=t||{},o=n.key,r=n.state,i=window.location,a=i.pathname+i.search+i.hash;return(0,j.default)(!l||(0,R.hasBasename)(a,l),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+a+'" to begin with "'+l+'".'),l&&(a=(0,R.stripBasename)(a,l)),(0,Y.createLocation)(a,r,o)},h=function e(){return Math.random().toString(36).substr(2,a)},p=(0,M.default)(),v=function e(t){A(S,t),S.length=u.length,p.notifyListeners(S.location,S.action)},y=function e(t){(0,q.isExtraneousPopstateEvent)(t)||w(d(t.state))},m=function e(){w(d(B()))},g=!1,w=function e(t){g?(g=!1,v()):p.confirmTransitionTo(t,"POP",f,function(e){e?v({action:"POP",location:t}):b(t)})},b=function e(t){var n=S.location,o=O.indexOf(n.key);-1===o&&(o=0);var r=O.indexOf(t.key);-1===r&&(r=0);var i=o-r;i&&(g=!0,P(i))},k=d(B()),O=[k.key],E=function e(t){return l+(0,R.createPath)(t)},P=(function e(t,n){(0,j.default)(!("object"===(void 0===t?"undefined":T(t))&&t.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var a=(0,Y.createLocation)(t,n,h(),S.location);p.confirmTransitionTo(a,"PUSH",f,function(e){if(e){var t=E(a),n=a.key,o=a.state;if(s)if(u.pushState({key:n,state:o},null,t),c)window.location.href=t;else{var r=O.indexOf(S.location.key),i=O.slice(0,-1===r?0:r+1);i.push(a.key),O=i,v({action:"PUSH",location:a})}else(0,j.default)(o===undefined,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=t}})},function e(t,n){(0,j.default)(!("object"===(void 0===t?"undefined":T(t))&&t.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i="REPLACE",a=(0,Y.createLocation)(t,n,h(),S.location);p.confirmTransitionTo(a,i,f,function(e){if(e){var t=E(a),n=a.key,o=a.state;if(s)if(u.replaceState({key:n,state:o},null,t),c)window.location.replace(t);else{var r=O.indexOf(S.location.key);-1!==r&&(O[r]=a.key),v({action:i,location:a})}else(0,j.default)(o===undefined,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(t)}})},function e(t){u.go(t)}),L=(function e(){return P(-1)},function e(){return P(1)},0),x=function e(t){1===(L+=t)?((0,q.addEventListener)(window,C,y),n&&(0,q.addEventListener)(window,U,m)):0===L&&((0,q.removeEventListener)(window,C,y),n&&(0,q.removeEventListener)(window,U,m))},_=!1,S=(function e(){var t=0<arguments.length&&arguments[0]!==undefined&&arguments[0],n=p.setPrompt(t);return _||(x(1),_=!0),function(){return _&&(_=!1,x(-1)),n()}},function e(t){var n=p.appendListener(t);return x(1),function(){x(-1),n()}},{length:u.length,action:"POP",location:k,createHref:E,push:function e(t,n){(0,j.default)(!("object"===(void 0===t?"undefined":T(t))&&t.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var a=(0,Y.createLocation)(t,n,h(),S.location);p.confirmTransitionTo(a,"PUSH",f,function(e){if(e){var t=E(a),n=a.key,o=a.state;if(s)if(u.pushState({key:n,state:o},null,t),c)window.location.href=t;else{var r=O.indexOf(S.location.key),i=O.slice(0,-1===r?0:r+1);i.push(a.key),O=i,v({action:"PUSH",location:a})}else(0,j.default)(o===undefined,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=t}})},replace:function e(t,n){(0,j.default)(!("object"===(void 0===t?"undefined":T(t))&&t.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i="REPLACE",a=(0,Y.createLocation)(t,n,h(),S.location);p.confirmTransitionTo(a,i,f,function(e){if(e){var t=E(a),n=a.key,o=a.state;if(s)if(u.replaceState({key:n,state:o},null,t),c)window.location.replace(t);else{var r=O.indexOf(S.location.key);-1!==r&&(O[r]=a.key),v({action:i,location:a})}else(0,j.default)(o===undefined,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(t)}})},go:P,goBack:function e(){return P(-1)},goForward:function e(){return P(1)},block:function e(){var t=0<arguments.length&&arguments[0]!==undefined&&arguments[0],n=p.setPrompt(t);return _||(x(1),_=!0),function(){return _&&(_=!1,x(-1)),n()}},listen:function e(t){var n=p.appendListener(t);return x(1),function(){x(-1),n()}}});return S}})),b=(m=w(),(g=function e(t){t.query=t.search.slice(1).split("&").reduce(function(e,t){return e[t.split("=")[0]]=t.split("=")[1],e},{})})(m.location),m.init=function(n){m.listen(function(e,t){g(e),n(e)})},m),k=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},O=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},P=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},L=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},x=function(e){function i(){var e;k(this,i);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=L(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n)));return console.log(n),r.code=n[1],Error.captureStackTrace(r,i),r}return P(i,e),i}(Error),_=function(){function e(){k(this,e),this._prev=null,this._next={},this._param=null,this._value=null}return O(e,[{key:"next",set:function e(t){this._next=t},get:function e(){return this._next}},{key:"param",set:function e(t){this._param=t},get:function e(){return this._param}},{key:"prev",set:function e(t){this._prev=t},get:function e(){return this._prev}},{key:"value",set:function e(t){this._value=t},get:function e(){return this._value}}]),e}(),S=new(function(){function e(){k(this,e),this.root=new _}return O(e,[{key:"add",value:function e(t){for(var n=t.path.split(""),o=this.root;n.length;){var r=n.shift();if(":"===r){for(var i="";"/"!==n[0]&&n.length;)i+=n.shift();if(o.next[r]=new _(r),(o=(o.prev=o).next[r]).param=i,!(r=n.shift()))break}o.next[r]||(o.next[r]=new _(r),o.prev=o),o=o.next[r]}o.value=t.val}},{key:"find",value:function e(t){for(var n=t.split(""),o={},r=this.root;n.length&&r;)if(r.next[":"]){for(var i="";"/"!==n[0]&&n.length;)i+=n.shift();o[r.next[":"].param]=i,r=r.next[":"]}else if(r.next["*"])for(r=r.next["*"];"/"!==n[0];)n.shift();else r=r.next[n.shift()];if(!r||!r.value)throw new x("Route not found!");return E({},r,{params:o})}}]),e}()),T=function(){function o(e,t){for(var n in k(this,o),this.routes=e,this.node=t,e)S.add({path:n,val:e[n]})}return O(o,[{key:"match",value:function e(t){return S.find(t)}},{key:"route",value:function e(t){try{var n=this.match(t);return console.log("the result",n),E({},n._value,{params:n.params},{match:!!n})}catch(e){return console.log("yeah?",e),new(function(e){function i(){var e;k(this,i);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=L(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n)));return r.params={message:r.message,code:r.code},r.middleware=function(){return Promise.resolve()},r}return P(i,x),i}())(e.message,e.code)}}}]),o}(),A=new(function(){function e(){k(this,e),this.props={params:b.location.params},this.props.query={params:b.location.params},this.createElement=this.createElement.bind(this),this.createElement()}return O(e,[{key:"createElement",value:function e(){return this._element=document.createElement("h1"),this._element.textContent="error: "+JSON.stringify(this.props),this._element}},{key:"updateProps",value:function e(t){return this.props=E({},this.props,t),this.createElement()}},{key:"element",get:function e(){return this._element}}]),e}()),j=function(e){function r(){var e;k(this,r);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return L(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(n)))}return P(r,T),O(r,[{key:"getRoute",value:function e(){var n=this;return new Promise(function(e,t){e(n.route(b.location.pathname))})}},{key:"render",value:function e(){var n=this;return this.getRoute().then(function(t){return t instanceof Error&&(console.log("instance of"),b.location.params=t.params,t.component=A.updateProps({params:t.params})),t.middleware(b,b.location,function(){}).then(function(){n.node.appendChild(t.component)}).catch(function(e){console.log(t),n.node.appendChild(document.createElement("h3").appendChild(document.createTextNode(e.message)))})})}}]),r}();e.BrowserRouter=j,Object.defineProperty(e,"__esModule",{value:!0})});
