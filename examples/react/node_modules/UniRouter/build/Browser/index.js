"use strict";function unwrapExports(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}Object.defineProperty(exports,"__esModule",{value:!0});var __DEV__="production"!==process.env.NODE_ENV,warning=function(){};__DEV__&&(warning=function(t,e,n){var o=arguments.length;n=new Array(2<o?o-2:0);for(var r=2;r<o;r++)n[r-2]=arguments[r];if(e===undefined)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(e.length<10||/^[s\W]*$/.test(e))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+e);if(!t){var a=0,i="Warning: "+e.replace(/%s/g,function(){return n[a++]});"undefined"!=typeof console&&console.error(i);try{throw new Error(i)}catch(t){}}});var warning_1=warning,NODE_ENV=process.env.NODE_ENV,invariant=function(t,e,n,o,r,a,i,s){if("production"!==NODE_ENV&&e===undefined)throw new Error("invariant requires an error message argument");if(!t){var u;if(e===undefined)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,o,r,a,i,s],c=0;(u=new Error(e.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}},invariant_1=invariant;function isAbsolute(t){return"/"===t.charAt(0)}function spliceOne(t,e){for(var n=e,o=n+1,r=t.length;o<r;n+=1,o+=1)t[n]=t[o];t.pop()}function resolvePathname(t){var e=1<arguments.length&&arguments[1]!==undefined?arguments[1]:"",n=t&&t.split("/")||[],o=e&&e.split("/")||[],r=t&&isAbsolute(t),a=e&&isAbsolute(e),i=r||a;if(t&&isAbsolute(t)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";var s=void 0;if(o.length){var u=o[o.length-1];s="."===u||".."===u||""===u}else s=!1;for(var l=0,c=o.length;0<=c;c--){var f=o[c];"."===f?spliceOne(o,c):".."===f?(spliceOne(o,c),l++):l&&(spliceOne(o,c),l--)}if(!i)for(;l--;l)o.unshift("..");!i||""===o[0]||o[0]&&isAbsolute(o[0])||o.unshift("");var d=o.join("/");return s&&"/"!==d.substr(-1)&&(d+="/"),d}var resolvePathname$1=Object.freeze({default:resolvePathname}),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function valueEqual(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(Array.isArray(e))return Array.isArray(n)&&e.length===n.length&&e.every(function(t,e){return valueEqual(t,n[e])});var t=void 0===e?"undefined":_typeof(e);if(t!==(void 0===n?"undefined":_typeof(n)))return!1;if("object"===t){var o=e.valueOf(),r=n.valueOf();if(o!==e||r!==n)return valueEqual(o,r);var a=Object.keys(e),i=Object.keys(n);return a.length===i.length&&a.every(function(t){return valueEqual(e[t],n[t])})}return!1}var valueEqual$1=Object.freeze({default:valueEqual}),PathUtils=createCommonjsModule(function(t,e){e.__esModule=!0;e.addLeadingSlash=function t(e){return"/"===e.charAt(0)?e:"/"+e},e.stripLeadingSlash=function t(e){return"/"===e.charAt(0)?e.substr(1):e};var o=e.hasBasename=function t(e,n){return new RegExp("^"+n+"(\\/|\\?|#|$)","i").test(e)};e.stripBasename=function t(e,n){return o(e,n)?e.substr(n.length):e},e.stripTrailingSlash=function t(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},e.parsePath=function t(e){var n=e||"/",o="",r="",a=n.indexOf("#");-1!==a&&(r=n.substr(a),n=n.substr(0,a));var i=n.indexOf("?");return-1!==i&&(o=n.substr(i),n=n.substr(0,i)),{pathname:n,search:"?"===o?"":o,hash:"#"===r?"":r}},e.createPath=function t(e){var n=e.pathname,o=e.search,r=e.hash,a=n||"/";return o&&"?"!==o&&(a+="?"===o.charAt(0)?o:"?"+o),r&&"#"!==r&&(a+="#"===r.charAt(0)?r:"#"+r),a}});unwrapExports(PathUtils);var PathUtils_1=PathUtils.addLeadingSlash,PathUtils_2=PathUtils.stripLeadingSlash,PathUtils_3=PathUtils.hasBasename,PathUtils_4=PathUtils.stripBasename,PathUtils_5=PathUtils.stripTrailingSlash,PathUtils_6=PathUtils.parsePath,PathUtils_7=PathUtils.createPath,_resolvePathname=resolvePathname$1&&resolvePathname||resolvePathname$1,_valueEqual=valueEqual$1&&valueEqual||valueEqual$1,LocationUtils=createCommonjsModule(function(t,e){e.__esModule=!0,e.locationsAreEqual=e.createLocation=undefined;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},s=n(_resolvePathname),o=n(_valueEqual);function n(t){return t&&t.__esModule?t:{default:t}}e.createLocation=function t(e,n,o,r){var a=void 0;"string"==typeof e?(a=(0,PathUtils.parsePath)(e)).state=n:((a=i({},e)).pathname===undefined&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",n!==undefined&&a.state===undefined&&(a.state=n));try{a.pathname=decodeURI(a.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return o&&(a.key=o),r?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=(0,s.default)(a.pathname,r.pathname)):a.pathname=r.pathname:a.pathname||(a.pathname="/"),a},e.locationsAreEqual=function t(e,n){return e.pathname===n.pathname&&e.search===n.search&&e.hash===n.hash&&e.key===n.key&&(0,o.default)(e.state,n.state)}});unwrapExports(LocationUtils);var LocationUtils_1=LocationUtils.locationsAreEqual,LocationUtils_2=LocationUtils.createLocation,createTransitionManager_1=createCommonjsModule(function(t,e){e.__esModule=!0;var s=function n(t){return t&&t.__esModule?t:{default:t}}(warning_1);(function t(){var i=null,r=(function t(e){return(0,s.default)(null==i,"A history supports only one prompt at a time"),i=e,function(){i===e&&(i=null)}},function t(e,n,o,r){if(null!=i){var a="function"==typeof i?i(e,n):i;"string"==typeof a?"function"==typeof o?o(a,r):((0,s.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),r(!0)):r(!1!==a)}else r(!0)},[]);(function t(e){var n=!0,o=function t(){n&&e.apply(undefined,arguments)};return r.push(o),function(){n=!1,r=r.filter(function(t){return t!==o})}}),function t(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];r.forEach(function(t){return t.apply(undefined,n)})};return{setPrompt:function t(e){return(0,s.default)(null==i,"A history supports only one prompt at a time"),i=e,function(){i===e&&(i=null)}},confirmTransitionTo:function t(e,n,o,r){if(null!=i){var a="function"==typeof i?i(e,n):i;"string"==typeof a?"function"==typeof o?o(a,r):((0,s.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),r(!0)):r(!1!==a)}else r(!0)},appendListener:function t(e){var n=!0,o=function t(){n&&e.apply(undefined,arguments)};return r.push(o),function(){n=!1,r=r.filter(function(t){return t!==o})}},notifyListeners:function t(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];r.forEach(function(t){return t.apply(undefined,n)})}}});e.default=function t(){var i=null,r=(function t(e){return(0,s.default)(null==i,"A history supports only one prompt at a time"),i=e,function(){i===e&&(i=null)}},function t(e,n,o,r){if(null!=i){var a="function"==typeof i?i(e,n):i;"string"==typeof a?"function"==typeof o?o(a,r):((0,s.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),r(!0)):r(!1!==a)}else r(!0)},[]);(function t(e){var n=!0,o=function t(){n&&e.apply(undefined,arguments)};return r.push(o),function(){n=!1,r=r.filter(function(t){return t!==o})}}),function t(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];r.forEach(function(t){return t.apply(undefined,n)})};return{setPrompt:function t(e){return(0,s.default)(null==i,"A history supports only one prompt at a time"),i=e,function(){i===e&&(i=null)}},confirmTransitionTo:function t(e,n,o,r){if(null!=i){var a="function"==typeof i?i(e,n):i;"string"==typeof a?"function"==typeof o?o(a,r):((0,s.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),r(!0)):r(!1!==a)}else r(!0)},appendListener:function t(e){var n=!0,o=function t(){n&&e.apply(undefined,arguments)};return r.push(o),function(){n=!1,r=r.filter(function(t){return t!==o})}},notifyListeners:function t(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];r.forEach(function(t){return t.apply(undefined,n)})}}}});unwrapExports(createTransitionManager_1);var DOMUtils=createCommonjsModule(function(t,e){e.__esModule=!0;e.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),e.addEventListener=function t(e,n,o){return e.addEventListener?e.addEventListener(n,o,!1):e.attachEvent("on"+n,o)},e.removeEventListener=function t(e,n,o){return e.removeEventListener?e.removeEventListener(n,o,!1):e.detachEvent("on"+n,o)},e.getConfirmation=function t(e,n){return n(window.confirm(e))},e.supportsHistory=function t(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},e.supportsPopStateOnHashChange=function t(){return-1===window.navigator.userAgent.indexOf("Trident")},e.supportsGoWithoutReloadUsingHash=function t(){return-1===window.navigator.userAgent.indexOf("Firefox")},e.isExtraneousPopstateEvent=function t(e){return e.state===undefined&&-1===navigator.userAgent.indexOf("CriOS")}});unwrapExports(DOMUtils);var DOMUtils_1=DOMUtils.canUseDOM,DOMUtils_2=DOMUtils.addEventListener,DOMUtils_3=DOMUtils.removeEventListener,DOMUtils_4=DOMUtils.getConfirmation,DOMUtils_5=DOMUtils.supportsHistory,DOMUtils_6=DOMUtils.supportsPopStateOnHashChange,DOMUtils_7=DOMUtils.supportsGoWithoutReloadUsingHash,DOMUtils_8=DOMUtils.isExtraneousPopstateEvent,createBrowserHistory_1=createCommonjsModule(function(t,e){e.__esModule=!0;var x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},T=n(warning_1),D=n(invariant_1),S=n(createTransitionManager_1);function n(t){return t&&t.__esModule?t:{default:t}}var A="popstate",j="hashchange",H=function t(){try{return window.history.state||{}}catch(t){return{}}};(function t(){var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:{};(0,D.default)(DOMUtils.canUseDOM,"Browser history needs a DOM");var s=window.history,u=(0,DOMUtils.supportsHistory)(),n=!(0,DOMUtils.supportsPopStateOnHashChange)(),o=e.forceRefresh,l=o!==undefined&&o,r=e.getUserConfirmation,c=r===undefined?DOMUtils.getConfirmation:r,a=e.keyLength,i=a===undefined?6:a,f=e.basename?(0,PathUtils.stripTrailingSlash)((0,PathUtils.addLeadingSlash)(e.basename)):"",d=function t(e){var n=e||{},o=n.key,r=n.state,a=window.location,i=a.pathname+a.search+a.hash;return(0,T.default)(!f||(0,PathUtils.hasBasename)(i,f),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+i+'" to begin with "'+f+'".'),f&&(i=(0,PathUtils.stripBasename)(i,f)),(0,LocationUtils.createLocation)(i,r,o)},h=function t(){return Math.random().toString(36).substr(2,i)},p=(0,S.default)(),v=function t(e){C(M,e),M.length=s.length,p.notifyListeners(M.location,M.action)},y=function t(e){(0,DOMUtils.isExtraneousPopstateEvent)(e)||w(d(e.state))},m=function t(){w(d(H()))},g=!1,w=function t(e){if(g)g=!1,v();else{p.confirmTransitionTo(e,"POP",c,function(t){t?v({action:"POP",location:e}):O(e)})}},O=function t(e){var n=M.location,o=U.indexOf(n.key);-1===o&&(o=0);var r=U.indexOf(e.key);-1===r&&(r=0);var a=o-r;a&&(g=!0,P(a))},b=d(H()),U=[b.key],_=function t(e){return f+(0,PathUtils.createPath)(e)},P=(function t(e,n){(0,T.default)(!("object"===(void 0===e?"undefined":x(e))&&e.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,LocationUtils.createLocation)(e,n,h(),M.location);p.confirmTransitionTo(i,"PUSH",c,function(t){if(t){var e=_(i),n=i.key,o=i.state;if(u)if(s.pushState({key:n,state:o},null,e),l)window.location.href=e;else{var r=U.indexOf(M.location.key),a=U.slice(0,-1===r?0:r+1);a.push(i.key),U=a,v({action:"PUSH",location:i})}else(0,T.default)(o===undefined,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=e}})},function t(e,n){(0,T.default)(!("object"===(void 0===e?"undefined":x(e))&&e.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var a="REPLACE",i=(0,LocationUtils.createLocation)(e,n,h(),M.location);p.confirmTransitionTo(i,a,c,function(t){if(t){var e=_(i),n=i.key,o=i.state;if(u)if(s.replaceState({key:n,state:o},null,e),l)window.location.replace(e);else{var r=U.indexOf(M.location.key);-1!==r&&(U[r]=i.key),v({action:a,location:i})}else(0,T.default)(o===undefined,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(e)}})},function t(e){s.go(e)}),E=(function t(){return P(-1)},function t(){return P(1)},0),k=function t(e){1===(E+=e)?((0,DOMUtils.addEventListener)(window,A,y),n&&(0,DOMUtils.addEventListener)(window,j,m)):0===E&&((0,DOMUtils.removeEventListener)(window,A,y),n&&(0,DOMUtils.removeEventListener)(window,j,m))},L=!1,M=(function t(){var e=0<arguments.length&&arguments[0]!==undefined&&arguments[0],n=p.setPrompt(e);return L||(k(1),L=!0),function(){return L&&(L=!1,k(-1)),n()}},function t(e){var n=p.appendListener(e);return k(1),function(){k(-1),n()}},{length:s.length,action:"POP",location:b,createHref:_,push:function t(e,n){(0,T.default)(!("object"===(void 0===e?"undefined":x(e))&&e.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,LocationUtils.createLocation)(e,n,h(),M.location);p.confirmTransitionTo(i,"PUSH",c,function(t){if(t){var e=_(i),n=i.key,o=i.state;if(u)if(s.pushState({key:n,state:o},null,e),l)window.location.href=e;else{var r=U.indexOf(M.location.key),a=U.slice(0,-1===r?0:r+1);a.push(i.key),U=a,v({action:"PUSH",location:i})}else(0,T.default)(o===undefined,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=e}})},replace:function t(e,n){(0,T.default)(!("object"===(void 0===e?"undefined":x(e))&&e.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var a="REPLACE",i=(0,LocationUtils.createLocation)(e,n,h(),M.location);p.confirmTransitionTo(i,a,c,function(t){if(t){var e=_(i),n=i.key,o=i.state;if(u)if(s.replaceState({key:n,state:o},null,e),l)window.location.replace(e);else{var r=U.indexOf(M.location.key);-1!==r&&(U[r]=i.key),v({action:a,location:i})}else(0,T.default)(o===undefined,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(e)}})},go:P,goBack:function t(){return P(-1)},goForward:function t(){return P(1)},block:function t(){var e=0<arguments.length&&arguments[0]!==undefined&&arguments[0],n=p.setPrompt(e);return L||(k(1),L=!0),function(){return L&&(L=!1,k(-1)),n()}},listen:function t(e){var n=p.appendListener(e);return k(1),function(){k(-1),n()}}});return M});e.default=function t(){var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:{};(0,D.default)(DOMUtils.canUseDOM,"Browser history needs a DOM");var s=window.history,u=(0,DOMUtils.supportsHistory)(),n=!(0,DOMUtils.supportsPopStateOnHashChange)(),o=e.forceRefresh,l=o!==undefined&&o,r=e.getUserConfirmation,c=r===undefined?DOMUtils.getConfirmation:r,a=e.keyLength,i=a===undefined?6:a,f=e.basename?(0,PathUtils.stripTrailingSlash)((0,PathUtils.addLeadingSlash)(e.basename)):"",d=function t(e){var n=e||{},o=n.key,r=n.state,a=window.location,i=a.pathname+a.search+a.hash;return(0,T.default)(!f||(0,PathUtils.hasBasename)(i,f),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+i+'" to begin with "'+f+'".'),f&&(i=(0,PathUtils.stripBasename)(i,f)),(0,LocationUtils.createLocation)(i,r,o)},h=function t(){return Math.random().toString(36).substr(2,i)},p=(0,S.default)(),v=function t(e){C(M,e),M.length=s.length,p.notifyListeners(M.location,M.action)},y=function t(e){(0,DOMUtils.isExtraneousPopstateEvent)(e)||w(d(e.state))},m=function t(){w(d(H()))},g=!1,w=function t(e){g?(g=!1,v()):p.confirmTransitionTo(e,"POP",c,function(t){t?v({action:"POP",location:e}):O(e)})},O=function t(e){var n=M.location,o=U.indexOf(n.key);-1===o&&(o=0);var r=U.indexOf(e.key);-1===r&&(r=0);var a=o-r;a&&(g=!0,P(a))},b=d(H()),U=[b.key],_=function t(e){return f+(0,PathUtils.createPath)(e)},P=(function t(e,n){(0,T.default)(!("object"===(void 0===e?"undefined":x(e))&&e.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,LocationUtils.createLocation)(e,n,h(),M.location);p.confirmTransitionTo(i,"PUSH",c,function(t){if(t){var e=_(i),n=i.key,o=i.state;if(u)if(s.pushState({key:n,state:o},null,e),l)window.location.href=e;else{var r=U.indexOf(M.location.key),a=U.slice(0,-1===r?0:r+1);a.push(i.key),U=a,v({action:"PUSH",location:i})}else(0,T.default)(o===undefined,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=e}})},function t(e,n){(0,T.default)(!("object"===(void 0===e?"undefined":x(e))&&e.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var a="REPLACE",i=(0,LocationUtils.createLocation)(e,n,h(),M.location);p.confirmTransitionTo(i,a,c,function(t){if(t){var e=_(i),n=i.key,o=i.state;if(u)if(s.replaceState({key:n,state:o},null,e),l)window.location.replace(e);else{var r=U.indexOf(M.location.key);-1!==r&&(U[r]=i.key),v({action:a,location:i})}else(0,T.default)(o===undefined,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(e)}})},function t(e){s.go(e)}),E=(function t(){return P(-1)},function t(){return P(1)},0),k=function t(e){1===(E+=e)?((0,DOMUtils.addEventListener)(window,A,y),n&&(0,DOMUtils.addEventListener)(window,j,m)):0===E&&((0,DOMUtils.removeEventListener)(window,A,y),n&&(0,DOMUtils.removeEventListener)(window,j,m))},L=!1,M=(function t(){var e=0<arguments.length&&arguments[0]!==undefined&&arguments[0],n=p.setPrompt(e);return L||(k(1),L=!0),function(){return L&&(L=!1,k(-1)),n()}},function t(e){var n=p.appendListener(e);return k(1),function(){k(-1),n()}},{length:s.length,action:"POP",location:b,createHref:_,push:function t(e,n){(0,T.default)(!("object"===(void 0===e?"undefined":x(e))&&e.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,LocationUtils.createLocation)(e,n,h(),M.location);p.confirmTransitionTo(i,"PUSH",c,function(t){if(t){var e=_(i),n=i.key,o=i.state;if(u)if(s.pushState({key:n,state:o},null,e),l)window.location.href=e;else{var r=U.indexOf(M.location.key),a=U.slice(0,-1===r?0:r+1);a.push(i.key),U=a,v({action:"PUSH",location:i})}else(0,T.default)(o===undefined,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=e}})},replace:function t(e,n){(0,T.default)(!("object"===(void 0===e?"undefined":x(e))&&e.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var a="REPLACE",i=(0,LocationUtils.createLocation)(e,n,h(),M.location);p.confirmTransitionTo(i,a,c,function(t){if(t){var e=_(i),n=i.key,o=i.state;if(u)if(s.replaceState({key:n,state:o},null,e),l)window.location.replace(e);else{var r=U.indexOf(M.location.key);-1!==r&&(U[r]=i.key),v({action:a,location:i})}else(0,T.default)(o===undefined,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(e)}})},go:P,goBack:function t(){return P(-1)},goForward:function t(){return P(1)},block:function t(){var e=0<arguments.length&&arguments[0]!==undefined&&arguments[0],n=p.setPrompt(e);return L||(k(1),L=!0),function(){return L&&(L=!1,k(-1)),n()}},listen:function t(e){var n=p.appendListener(e);return k(1),function(){k(-1),n()}}});return M}}),createBrowserHistory=unwrapExports(createBrowserHistory_1),history=function(){var t=createBrowserHistory(),o=function t(e){e.query=e.search.slice(1).split("&").reduce(function(t,e){return t[e.split("=")[0]]=e.split("=")[1],t},{})};return o(t.location),t.init=function(n){t.listen(function(t,e){o(t),n(t)})},t}(),classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}(),_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},possibleConstructorReturn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},RouterError=function(t){function a(){var t;classCallCheck(this,a);for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var r=possibleConstructorReturn(this,(t=a.__proto__||Object.getPrototypeOf(a)).call.apply(t,[this].concat(n)));return console.log(n),r.code=n[1],Error.captureStackTrace(r,a),r}return inherits(a,t),a}(Error),Node=function(){function t(){classCallCheck(this,t),this._prev=null,this._next={},this._param=null,this._value=null}return createClass(t,[{key:"next",set:function t(e){this._next=e},get:function t(){return this._next}},{key:"param",set:function t(e){this._param=e},get:function t(){return this._param}},{key:"prev",set:function t(e){this._prev=e},get:function t(){return this._prev}},{key:"value",set:function t(e){this._value=e},get:function t(){return this._value}}]),t}(),RouteTrie=function(){function t(){classCallCheck(this,t),this.root=new Node}return createClass(t,[{key:"add",value:function t(e){for(var n=e.path.split(""),o=this.root;n.length;){var r=n.shift();if(":"===r){for(var a="";"/"!==n[0]&&n.length;)a+=n.shift();if(o.next[r]=new Node(r),(o=(o.prev=o).next[r]).param=a,!(r=n.shift()))break}o.next[r]||(o.next[r]=new Node(r),o.prev=o),o=o.next[r]}o.value=e.val}},{key:"find",value:function t(e){for(var n=e.split(""),o={},r=this.root;n.length&&r;)if(r.next[":"]){for(var a="";"/"!==n[0]&&n.length;)a+=n.shift();o[r.next[":"].param]=a,r=r.next[":"]}else if(r.next["*"])for(r=r.next["*"];"/"!==n[0];)n.shift();else r=r.next[n.shift()];if(!r||!r.value)throw new RouterError("Route not found!");return _extends({},r,{params:o})}}]),t}(),routeTrie=new RouteTrie,Route=function(){function o(t,e){for(var n in classCallCheck(this,o),this.routes=t,this.node=e,t)routeTrie.add({path:n,val:t[n]})}return createClass(o,[{key:"match",value:function t(e){return routeTrie.find(e)}},{key:"route",value:function t(e){try{var n=this.match(e);return console.log("the result",n),_extends({},n._value,{params:n.params},{match:!!n})}catch(t){return console.log("yeah?",t),new(function(t){function a(){var t;classCallCheck(this,a);for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var r=possibleConstructorReturn(this,(t=a.__proto__||Object.getPrototypeOf(a)).call.apply(t,[this].concat(n)));return r.params={message:r.message,code:r.code},r.middleware=function(){return Promise.resolve()},r}return inherits(a,RouterError),a}())(t.message,t.code)}}}]),o}(),ErrorComp=function(){function t(){classCallCheck(this,t),this.props={params:history.location.params},this.props.query={params:history.location.params},this.createElement=this.createElement.bind(this),this.createElement()}return createClass(t,[{key:"createElement",value:function t(){return this._element=document.createElement("h1"),this._element.textContent="error: "+JSON.stringify(this.props),this._element}},{key:"updateProps",value:function t(e){return this.props=_extends({},this.props,e),this.createElement()}},{key:"element",get:function t(){return this._element}}]),t}(),errorComp=new ErrorComp,Router=function(t){function r(){var t;classCallCheck(this,r);for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return possibleConstructorReturn(this,(t=r.__proto__||Object.getPrototypeOf(r)).call.apply(t,[this].concat(n)))}return inherits(r,Route),createClass(r,[{key:"getRoute",value:function t(){var n=this;return new Promise(function(t,e){t(n.route(history.location.pathname))})}},{key:"render",value:function t(){var n=this;return this.getRoute().then(function(e){return e instanceof Error&&(console.log("instance of"),history.location.params=e.params,e.component=errorComp.updateProps({params:e.params})),e.middleware(history,history.location,function(){}).then(function(){n.node.appendChild(e.component)}).catch(function(t){console.log(e),n.node.appendChild(document.createElement("h3").appendChild(document.createTextNode(t.message)))})})}}]),r}();exports.BrowserRouter=Router;
